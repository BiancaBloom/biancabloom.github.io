<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Test de Piel · BiancaBloomRingana</title>

<style>
  :root{
    --rg-green:#6fb28c;
    --rg-dark:#3b7f64;
    --rg-bg:#f2f6f4;
    --card:#ffffff;
    --muted:#9aaea0;
    --accent:#dff2e6;
    --text:#1e1e1e;
  }
  body{
    font-family: 'Helvetica Neue', Arial, sans-serif;
    background:var(--rg-bg);
    margin:0;
    padding:24px;
    color:var(--text);
  }
  .wrap{
    max-width:980px;
    margin:0 auto;
    background:var(--card);
    border-radius:14px;
    padding:28px;
    box-shadow:0 8px 30px rgba(0,0,0,0.06);
  }
  h1{text-align:center;color:var(--rg-dark);}
  .tagline{text-align:center;color:var(--rg-dark);font-style:italic;margin-top:6px;margin-bottom:20px;}
  .panel{background:#fff;padding:18px;border-radius:12px;border:1px solid #eef5ef;margin-bottom:20px;}
  .section-title{font-weight:700;color:var(--rg-dark);margin-bottom:8px;}
  label{display:block;font-weight:600;margin-top:8px;margin-bottom:6px;}
  select,input[type=text]{width:100%;padding:10px;border-radius:8px;border:1px solid #e0e7e2;background:#fff;}
  .btn{
    display:inline-block;
    background:var(--rg-green);
    color:#fff;
    border:none;
    padding:12px 14px;
    border-radius:10px;
    cursor:pointer;
    font-weight:700;
  }
  .btn.ghost{background:transparent;color:var(--rg-dark);border:1px solid var(--rg-dark);}
  ul{margin-left:20px;}
  .muted{font-size:13px;color:var(--muted);}
  .share a{
    display:inline-block;padding:8px 10px;border-radius:8px;
    background:#fff;border:1px solid #e8efe9;color:var(--rg-dark);text-decoration:none;font-weight:600;margin-right:8px;
  }
</style>
</head>

<body>
<div class="wrap">

<h1>Test de Piel · BiancaBloomRingana</h1>
<div class="tagline">Ética y excelencia: el cóctel infalible.</div>

<!-- ACCESO SEGURO -->
<div id="accessGate" class="panel">
  <div class="section-title">Acceso seguro</div>
  <p class="muted">
    Para acceder a este test debes estar registrada como clienta Ringana.
    Si vienes desde el proceso de registro verás el test automáticamente.
  </p>

  <p><strong>Enlace oficial de registro:</strong></p>
  <input id="registerLink" type="text" value="https://www.ringana.com/es/4577798">

  <div style="margin-top:14px;">
    <a id="openReg" class="btn" target="_blank">Ir al registro</a>
    <button class="btn ghost" onclick="simulateAccess()">Ya estoy registrada</button>
  </div>
</div>

<!-- CONTENIDO PRINCIPAL -->
<div id="mainGrid" style="display:none;">

  <div class="panel">
    <div class="section-title">1 — Diagnóstico inicial</div>

    <label>1. Edad</label>
    <select id="q1">
      <option value="0">Menos de 25</option>
      <option value="1">26–35</option>
      <option value="2">36–45</option>
      <option value="3">46–55</option>
      <option value="4">Más de 55</option>
    </select>

    <label>2. ¿Tomas el sol?</label>
    <select id="q2">
      <option value="0">Nunca</option>
      <option value="1">Ocasionalmente</option>
      <option value="2">A menudo</option>
    </select>

    <label>3. ¿Trabajas en interiores?</label>
    <select id="q3">
      <option value="1">Sí</option>
      <option value="0">No</option>
    </select>

    <label>4. Preferencia de textura</label>
    <select id="q4">
      <option value="0">Ligera</option>
      <option value="2">Confort</option>
      <option value="3">Protectora</option>
    </select>

    <label>5. Consumo de alcohol</label>
    <select id="q5">
      <option value="0">No</option>
      <option value="1">Ocasional</option>
      <option value="2">Regular</option>
    </select>

    <label>6. ¿Tienes impurezas?</label>
    <select id="q6">
      <option value="0">Sí</option>
      <option value="1">No</option>
    </select>

    <label>7. ¿Arrugas visibles?</label>
    <select id="q7">
      <option value="2">Sí</option>
      <option value="0">No</option>
    </select>

    <label>8. ¿Vives en ciudad?</label>
    <select id="q8">
      <option value="1">Sí</option>
      <option value="0">No</option>
    </select>

    <label>9. Deporte semanal</label>
    <select id="q9">
      <option value="0">&gt;1h</option>
      <option value="1">30–60 min</option>
      <option value="2">&lt;30 min</option>
    </select>

    <label>10. Complexión</label>
    <select id="q10">
      <option value="2">Bajo peso</option>
      <option value="0">Normal</option>
      <option value="1">Sobrepeso</option>
    </select>

    <label>11. Aire acondicionado / calefacción</label>
    <select id="q11">
      <option value="1">Sí</option>
      <option value="0">No</option>
    </select>

    <label>12. Alimentación</label>
    <select id="q12">
      <option value="0">Cuido mi alimentación</option>
      <option value="1">A veces</option>
      <option value="2">No</option>
    </select>

    <label>13. ¿Fumas?</label>
    <select id="q13">
      <option value="0">No</option>
      <option value="1">&lt;10/día</option>
      <option value="2">≥10/día</option>
    </select>

    <label>14. Poros visibles</label>
    <select id="q14">
      <option value="0">Sí</option>
      <option value="1">No</option>
    </select>

    <label>15. Sensibilidad e irritación</label>
    <select id="q15">
      <option value="2">Sí</option>
      <option value="0">No</option>
    </select>

  </div>

  <!-- INFO EXTRA -->
  <div class="panel">
    <div class="section-title">2 — Información adicional</div>

    <label>16. Enfermedades / medicación</label>
    <input id="q16" type="text">

    <label>17. Características especiales</label>
    <input id="q17" type="text">

    <label>18. Objetivo principal</label>
    <input id="q18" type="text">

    <label>19. Algo más</label>
    <input id="q19" type="text">
  </div>

  <!-- PERSONALIZACIÓN -->
  <div class="panel">
    <div class="section-title">3 — Personalización</div>

    <label>20. Sensibilidad</label>
    <select id="q20">
      <option value="calm">Muy sensible</option>
      <option value="pure">Normal</option>
    </select>

    <label>21. Prioridad actual</label>
    <select id="q21">
      <option value="hydro">Hidratación</option>
      <option value="antiage">Antiedad</option>
    </select>

    <label>22. Tolerancia nocturna</label>
    <select id="q22">
      <option value="overnight">Sí</option>
      <option value="perfection">No</option>
    </select>

    <label>Objetivos específicos:</label>
    <label><input type="checkbox" class="obj" value="effect"> Firmeza</label>
    <label><input type="checkbox" class="obj" value="glow"> Luminosidad</label>
    <label><input type="checkbox" class="obj" value="repair"> Rojeces</label>
    <label><input type="checkbox" class="obj" value="eye"> Contorno de ojos</label>

    <div style="margin-top:20px;">
      <button class="btn" onclick="runTest()">Obtener diagnóstico</button>
    </div>
  </div>

  <!-- RESULTADO -->
  <div id="resultPanel" class="panel" hidden>
    <div class="section-title">Resultado</div>
    <div id="diagnosis"></div>
    <div id="routine"></div>
    <div id="supplements"></div>

    <div class="share" id="shareWrap" style="display:none;margin-top:14px;">
      <a id="mailto" href="#">Email</a>
      <a id="wa" target="_blank">WhatsApp</a>
    </div>
  </div>

</div>

</div> <!-- wrap -->

<script>
/* ======== ACCESO ======== */
const params = new URLSearchParams(location.search);
if(params.get('registered') === 'true'){
    showMain();
} else {
    document.getElementById('accessGate').style.display="block";
}
document.getElementById('openReg').href = document.getElementById('registerLink').value;

function simulateAccess(){
  showMain();
}
function showMain(){
  document.getElementById('accessGate').style.display="none";
  document.getElementById('mainGrid').style.display="block";
}

/* ======== LÓGICA ======== */
function intval(v){ return parseInt(v,10) || 0; }

function runTest(){
  let total = 0;
  for(let i=1;i<=15;i++){ total += intval(document.getElementById('q'+i).value); }

  let tipo = total<=10 ? "Piel Grasa" : total<=20 ? "Piel Mixta" : "Piel Seca";

  // flags
  const q = n => intval(document.getElementById('q'+n).value);
  const likelyDehydrated = (q(11)===1 || q(12)>=1 || q(9)===2);
  const asfixiada = (tipo!=="Piel Seca" && q(6)===0 && q(14)===0 && q(4)===0 && likelyDehydrated);
  const madura = (q(1)>=3 || q(7)>=2);
  const reactive = (document.getElementById('q20').value==="calm" || q(15)===2);

  const notes = [];
  if(likelyDehydrated) notes.push("Deshidratación");
  if(asfixiada) notes.push("Asfixiada");
  if(madura) notes.push("Madura");
  if(reactive) notes.push("Reactiva");

  // rutina
  const rutina=[];
  rutina.push("FRESH Cleanser — Limpieza suave");

  if(tipo==="Piel Grasa"){
    rutina.push( reactive ? "Tonic Calm" : "Tonic Pure" );
  } else if(tipo==="Piel Mixta"){
    rutina.push( reactive ? "Tonic Calm" : "Tonic Pure (zona T)" );
  } else {
    rutina.push("Tonic Calm");
  }

  if(asfixiada) rutina.push("Hydro Serum + exfoliante suave semanal");
  else rutina.push("Hydro Serum");

  if(tipo==="Piel Grasa") rutina.push("Cream Light");
  if(tipo==="Piel Mixta") rutina.push("Cream Medium");
  if(tipo==="Piel Seca") rutina.push("Cream Rich");

  if(madura || document.getElementById('q21').value==="antiage") rutina.push("ADDS Effect + Vit C");
  if(likelyDehydrated || document.getElementById('q21').value==="hydro") rutina.push("ADDS Glow");

  rutina.push(
    document.getElementById('q22').value==="overnight"
    ? "Overnight Repair"
    : "Skin Perfection"
  );

  const objs = Array.from(document.querySelectorAll('.obj:checked')).map(x=>x.value);
  if(objs.includes('glow')) rutina.push("ADDS Glow extra");
  if(objs.includes('effect')) rutina.push("ADDS Effect");
  if(objs.includes('repair')) rutina.push("ADDS Repair");
  if(objs.includes('eye')) rutina.push("Eye Serum");

  // suplementos
  const suples=[];
  function addS(x){ if(suples.length<3 && !suples.includes(x)) suples.push(x); }

  if(tipo==="Piel Grasa") addS("CAPS Skin");
  if(tipo==="Piel Mixta") addS("CAPS Antiox");
  if(tipo==="Piel Seca") addS("CAPS Hyaluron");

  if(reactive) addS("CAPS Protect");
  if(madura) addS("CAPS Omega 3");

  if(q(2)>=1 || q(8)===1) addS("CAPS Antiox");
  if(q(11)===1) addS("CAPS Hyaluron");
  if(q(12)>=1) addS("PACK Cleansing");
  if(q(13)>=1) addS("CAPS Omega 3");
  if(q(9)===2) addS("PACK Energy");

  if(!suples.length) addS("CAPS Antiox");

  // render
  document.getElementById('resultPanel').hidden=false;

  document.getElementById('diagnosis').innerHTML = `
    <p><strong>Tipo de piel:</strong> ${tipo}</p>
    <p class="muted">${notes.join(" • ") || "Sin subtipo destacado"}</p>
    <p><strong>Puntuación:</strong> ${total}</p>
  `;

  document.getElementById('routine').innerHTML = `
    <h3>Rutina recomendada</h3>
    <ul>${rutina.map(r=>`<li>${r}</li>`).join("")}</ul>
  `;

  document.getElementById('supplements').innerHTML = `
    <h3>Suplementación sugerida</h3>
    <ul>${suples.map(s=>`<li>${s}</li>`).join("")}</ul>
  `;

  document.getElementById('shareWrap').style.display="block";
}

</script>

</body>
</html>
